runtime.GOMAXPROCS(0) - функция сеттер, она просто возвращает число текущих потоков ОС, которые может использовать приложение
runtime.NumCPU() - стабильно показывает текущее число потоков ОС (если процессор поддерживает гипертрейдинг, то их будет больше фактического числа ядер)
runtime.GOMAXPROCS(16) - устанавливает максимальное число используемых потоков (кстати, возвращает предыдущее значение)

Примечательно, что GOMAXPROCS работает с STW

Особенности GOMAXPROCS:
1. Если задать значение больше, чем логических ядер, то работать будет, то станет больше переключений контекста и производительность станет хуже
2. Если задать меньше, чем есть потоков - то тогда просто будет порезана производительность
3. При работе с докером можно указать в докере количество ядер, используемых на хост машине
и GOMAXPROCS по дефолту возьмет общее количество ядер хост-машины 
Решение - использовать отдельную либу или выставлять GOMAXPROCS значению которое стоит в докере
