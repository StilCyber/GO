В этом коде на каждой итерации аллоцируется по 1 гигабайту в глобальную переменную data 
Гипотетически, код должен работать постоянно, так как GC поспевает за "нечастыми" большими аллокациями
Если запустить с отключенным сборщиком мусора, некоторое время тоже отработает

В данном случае используется lazy allocation 
Адресное пространство будет расширено сразу же 
И будет расширяться до некоторых пор 
Если туда ничего не пишем, то аллокации физической памяти не происходит

Если раскомментируем вложенный цикл, то ситуация будет другой 
Начинается запись в память, и происходит своппинг - часть страниц записывается на диск (ха-ха, надеюсь вы побольше выделили себе памяти в swap)